language: java
jdk:
- openjdk8
- openjdk11
addons:
  apt:
    packages:
    - libxml2-utils
before_script:
- PROJECT_VERSION=$(xmllint --xpath '/*[local-name()="project"]/*[local-name()="version"]/text()' pom.xml)
- if [ ! -z "$TRAVIS_TAG" ]; then mvn versions:set -DnewVersion=$TRAVIS_TAG; fi
script:
- mvn clean install -U
after_success:
- bash <(curl -s https://codecov.io/bash)
- if [[ "$PROJECT_VERSION" == *SNAPSHOT ]] && [[ "$TRAVIS_BRANCH" == "master" ]]; then mvn deploy -B -DskipTests=true --settings settings.xml; fi
- if [[ "$PROJECT_VERSION" == *SNAPSHOT ]] && [[ "$TRAVIS_BRANCH" == "master" ]]; then curl -X POST -F token=$TRIGGER_TOKEN -F ref=master -F "variables[PROJECT_VERSION]=$PROJECT_VERSION" $TRIGGER_URL; fi
deploy:
  provider: releases
  api_key:
    secure: oTXozaI9Srkeqfgf397bIxjFM46fHfWKWgkiNL9iS1320I6wruc2wRmeAyjtiythLpoAOTEBS/Lo88KbL3r2dBN/Sp98/SHuW7zvSNQL6JYQkErhQGXh1mSeX7z6eaNvHa8BVlMdNhki7mmpxBndz705CBhr9pSe/EE+p12RkM8nyDXBcqhf+46+NRUjmAD3oL6dS8JjwMgX2GhNukUQ1UhLdiyILBHmsM/hIsTW0ES+h7tgUgPQUpopf4UwCwhTqvmEbJeqlOaEKzfnMwkE1cmCJ2wZEsmTQqllnQXh53iDcoeYaBcv+Qv6E0dRcrtZHVVaFXE7neHMpUqZCtrKRnIMkAAzVD7Jvg81YOp36AiiF9ONrOgHnPTTBa6Y6jZ5dbqBXQGPKRAgcIw1/YzAoKY+ZPP/n77t3uZYFZOWhzM7G42iwJVZDdYCixp4ma9oxNX6SdBhHkVILIuo7ZOpFItHZj1zgJupvf7hv9C7jq56dgXaS4ejo9TVAvLajH24EWUKqB4Lz2ippKW8ifJkggSy33/5ytgKqe340gVAzEyHIsfr+lAYDVi8uMKD4r/PNBz5O3KvH0XJPTc3pZBSx0K9Pi1e2RvvLEawJShDb8E58xzenR4L+jnl4Kks5NaEGqn4w28nCJuzfTxpw5WDGqml0MXtMKA3vuj03SdeNQY=
  file_glob: true
  file:
  - "**/target/*.jar"
  skip_cleanup: true
  on:
    tags: true
env:
  global:
  - secure: W2UhMY/aWEvmj5EU8ACRog2aOte9bIZKIxiaCtkvJSafk9ZqJVvG8Zbs7IuuVnF12cxIa8clb6y0HZWnZDTX6StOYFngHSgHyLLX8ng4TjLP7yKYAbLhFvsMY2iRLImvQsLu4B/t7smYYg5eEy4SJOC2ARRaLuwJZ6zfdD+6RGeyxCEPMkeZPUWeSDCJnjfg5fV+fdUhAyqgTfimkq+a4kRhNTxArzj+A/c1dYMkftyT3AalrQDlPEnfsFF2ndsmtmFR1fxfemZB6vvQPpnnzATPjSEtboziVplvMn+bln8oOqtLfgLGrjsn4JKUEZNTTUyD5MtHLRpBHO6PbcfJz2PzR2/rjqBJXlzUoYnDjKsaEb1s9j2afL30z7vKIPA8qirA9A89L0f/RFdjszRWn/noI+5EVTJqQDdAcdgQDGbaiM8+hnj4ZeF0BNA/ZgetwNsKv6/JBx41yHXGqIwbB5KBa5JELGVmWzTR0Be10aUT4Ce2wGSoBR2dk+PKsDuJOCfEATwBS0IWzKEaOvxeeiIO9Nwp4BygJlWQPx6vy+jChNckwr4UnwnLFYFSgF2/0rD3+XJkjFJ+I+298AVS+aA968FNgGMNnyiVJxQOMytn6zah1OGNI7TQbi8Euizi0MmJ+5R0c2eBHTvDk6U/r4ux6+q/6ptN7Je63/AtTiQ=
  - secure: oQrf6v9/K6r56pntSuaphzhKyI+2s9UcAJJb3H6d6cBMbzgVEfdCbyXigcO9dXBUbufenBxKwzd+/mlOjqZeR26Cr1bNfa7WFjBuY/WQwDZqazn3N6/22ZYOFdc9bad2YWm1Z6sZ0PZFS2Yk/oFSagMog7x/GyGg7JmxQD1eYwKPBp8X1K4TFqTBVmdbBDlzkXj3Bk6QQaIgIfcavEAV7ane4AqmtStoL2dTIX1XxyTApANcKYneDwMsSY+mQtFK7x/th9VmuhN/Ao6exK07yG4Fvfb3OKhVe+M/QznKXMAKmSc2oHemjFAggvw4FWb5BWn0Aee4uXcE8HW/V9q/Anrl9/m95Ym+hD9+1HQPymcU7G3BJ78Ts/zTPBTEn5zbfLoTgI2sigBrdHM/72bD72z1KSphOX/DXthwHIz7KMG6RRjzyuuTKTtqz9UwH1ZjrP9OKlOtjD8QjuJBvSpFmw4qKSISPcBWsfag9BtEcq+CrOZXLDuL8hopRgajr91QTslDU1iC8PEx3xZj23zX73zTuw8SzH2Adlx9GwO+Bn8UAkDLM+/dDAVdeEnK/9wZtwKE2PYinsJGrvAeEKzSlDceh3hZRVucpNRJC/8gOPMocdDAYRnw5P17xfNP3AsL4PmsJmwsNbTzqJPkhk1ptlCYHXeaVE0HQsidgobMGoQ=
  - secure: SgZpcNnnCBrzuHZ+/WA+PcL7dE9wOPaH7p4jFc1VwkgnK3hIo2Sa/szo5McSc95KM0EVgcetoJJVFTGzZZ6+uu35w7JEMlk4vXn9f8nNh/1q9CpXFK5l4hiD6e+TbiWJvM0O8QRjpENLuPAxunaDn0F3TU7l3qT3Ce6mlKvt1txmhyGDHegMVLBimArKpunqxvRmYW6nI/hKKMniY4gAWj+/yBLDAtQn6nKT6L7PXyJpE/OMDII11/xMDVgfsus/nZnpvANKd+CAx/uBajSJeRWjNlZ2mRSyP6Cmgz4ql7TUyu25wAE8PJrUxXH0/5FHacE4NiXUyEDEVcwiXYhr/05AVl087TOl/AvchrGABaD9iyQA+dwy66d5o9w/KJKLQwC0+BY1JeH/Y3Aj3klzlK7oQggy815bwt6zXZt2biAJqQlxdYJmIy44IfmtxsBuwPcGEGgl1QcOdw8cAICBPmVzzCkForMx69+gG66gOJc2EIguhW6OuRm8N68VJHl/2byzdQZTiECBjalg+fe8vrnqEPmh9BTgKlOCnuKGBX1lypfrXWX9kw+tuO9qANcke0l1OrSjc30EmJtgckQGMquWJA1vRtZzqUqMovLckJIo/Gnu3o9mK3AokoY+bTGf98/A+KGuDAHg3zeLW7tqIYP/Q3/QG9PrPHScNulawoA=
  - secure: BLTwqIt7zjMBPtu0KOcDSGgGZR1TQrtHitkKF1IuaxeycXlpgCy7vIaQu0oCpZMlNxVoo90HvQQOEB5VLSvSncV7KGsJDx5fPmMgYQLQJfVJflnYd+t4mbjTM3w0mu2kWJsYzC9bcyFS0+Y0D4NB1UDlSyPZOEOt9lniTU1IZ0zGB/sqd9eFqRjGM0hj8Ylw8u6lI1cDMuI9PmKf0BcHB9bBH8b5zIiRcieiJrX56rd6B1X3XqEgp96FQx8s2FrRINM/H1pjsYznpDU4oLKuoCFeMAVadXd6bxCPUZTYwkMGbKevEW73dwwjOq5Bwl5j7b9Vkw/GxtEVqcXDzJ2d4vTRO/l7S/T4DLo8XgxyB+9Py2rOlI4cX+CciWy79EeDS/GajWOIk7KpEitAbHBsUUqjXSylyLnOCz/zo02i1w2YaSftPRAD+Uvqvtlx6+UQebSjMZIQ7tYnJZzaaFLp1MmCaY+drPZZunp7oIHJDTeyUeJm+e5a/IqXxAANUndfuGmshLn/xve2Lq+fbF0Mgam28hTlXi9cwixGW/WmHaxt562OOps7dqN0twic+rh76ug+2uEJzYE/xL0T7xi0UQyuNuMeybEFceTa8qvzOfp2OPnDrkrT2wHQjFxeMIgwk34jVM1KH1v92PL4smL1cQxUEqOz+P4iyhipSSDk+iQ=
